<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="A modular set of compiler APIs empowering the next generation of Solidity code analysis and developer tooling. Written in Rust and distributed in multiple languages.
"><link href=https://NomicFoundation.github.io/slang/latest/internals/design-docs/language-definition-v2/ rel=canonical><link href=../ rel=prev><link rel=icon href=../../../assets/images/favicon.png><meta name=generator content="mkdocs-1.6.1, mkdocs-material-9.6.1"><title>Language Definition v2 - Slang</title><link rel=stylesheet href=../../../assets/stylesheets/main.a40c8224.min.css><link rel=stylesheet href=../../../assets/stylesheets/palette.06af60db.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Nunito:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Nunito";--md-code-font:"Roboto Mono"}</style><link rel=stylesheet href=../../../assets/stylesheets/colors.min.css><script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><script id=__analytics>function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-VKCEJVZ6KG"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-VKCEJVZ6KG",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-VKCEJVZ6KG",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script><script>if("undefined"!=typeof __md_analytics){var consent=__md_get("__consent");consent&&consent.analytics&&__md_analytics()}</script></head><body dir=ltr data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo><input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off><input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off><label class=md-overlay for=__drawer></label><div data-md-component=skip><a href=#language-definition-v2 class=md-skip> Skip to content </a></div><div data-md-component=announce></div><div data-md-color-scheme=default data-md-component=outdated hidden><aside class="md-banner md-banner--warning"><div class="md-banner__inner md-grid md-typeset"> You're not viewing the latest released version. <a href=../../../..><strong>Click here to go to the latest.</strong></a></div><script>var el=document.querySelector("[data-md-component=outdated]"),outdated=__md_get("__outdated",sessionStorage);!0===outdated&&el&&(el.hidden=!1)</script></aside></div><header class=md-header data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a href=../../.. title=Slang class="md-header__button md-logo" aria-label=Slang data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg></a><label class="md-header__button md-icon" for=__drawer><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> Slang </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> Language Definition v2 </span></div></div></div><form class=md-header__option data-md-component=palette><input class=md-option data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme=slate data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to light mode" type=radio name=__palette id=__palette_0><label class="md-header__button md-icon" title="Switch to light mode" for=__palette_1 hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label><input class=md-option data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme=default data-md-color-primary=indigo data-md-color-accent=indigo aria-label="Switch to dark mode" type=radio name=__palette id=__palette_1><label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_0 hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label></form><script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><label class="md-header__button md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required><label class="md-search__icon md-icon" for=__search><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav class=md-search__options aria-label=Search><button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav><div class=md-search__suggest data-md-component=search-suggest></div></form><div class=md-search__output><div class=md-search__scrollwrap tabindex=0 data-md-scrollfix><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta> Initializing search </div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a href=https://github.com/NomicFoundation/slang/ title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg></div><div class=md-source__repository> NomicFoundation/slang </div></a></div></nav></header><div class=md-container data-md-component=container><nav class=md-tabs aria-label=Tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a href=../../.. class=md-tabs__link> Home </a></li><li class=md-tabs__item><a href=../../../user-guide/ class=md-tabs__link> User Guide </a></li><li class=md-tabs__item><a href=../../../solidity-specification/ class=md-tabs__link> Solidity Specification </a></li><li class="md-tabs__item md-tabs__item--active"><a href=../../ class=md-tabs__link> Internals </a></li></ul></div></nav><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a href=../../.. title=Slang class="md-nav__button md-logo" aria-label=Slang data-md-component=logo><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg></a> Slang </label><div class=md-nav__source><a href=https://github.com/NomicFoundation/slang/ title="Go to repository" class=md-source data-md-component=source><div class="md-source__icon md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg></div><div class=md-source__repository> NomicFoundation/slang </div></a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../.. class=md-nav__link><span class=md-ellipsis> Home </span></a></li><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2><div class="md-nav__link md-nav__container"><a href=../../../user-guide/ class="md-nav__link "><span class=md-ellipsis> User Guide </span></a><label class="md-nav__link " for=__nav_2 id=__nav_2_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=false><label class=md-nav__title for=__nav_2><span class="md-nav__icon md-icon"></span> User Guide </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../../user-guide/introduction/ class=md-nav__link><span class=md-ellipsis> Introduction </span></a></li><li class=md-nav__item><a href=../../../user-guide/concepts/ class=md-nav__link><span class=md-ellipsis> Concepts </span></a></li><li class=md-nav__item><a href=../../../user-guide/tree-query-language/ class=md-nav__link><span class=md-ellipsis> Tree Query Language </span></a></li><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_2_5><div class="md-nav__link md-nav__container"><a href=../../../user-guide/npm-package/ class="md-nav__link "><span class=md-ellipsis> NPM Package </span></a><label class="md-nav__link " for=__nav_2_5 id=__nav_2_5_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_5_label aria-expanded=false><label class=md-nav__title for=__nav_2_5><span class="md-nav__icon md-icon"></span> NPM Package </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../../user-guide/npm-package/installation/ class=md-nav__link><span class=md-ellipsis> Installation </span></a></li><li class=md-nav__item><a href=../../../user-guide/npm-package/using-the-parser/ class=md-nav__link><span class=md-ellipsis> Using the Parser </span></a></li><li class=md-nav__item><a href=../../../user-guide/npm-package/using-the-cursor/ class=md-nav__link><span class=md-ellipsis> Using the Cursor </span></a></li><li class=md-nav__item><a href=../../../user-guide/npm-package/using-queries/ class=md-nav__link><span class=md-ellipsis> Using Queries </span></a></li><li class=md-nav__item><a href=../../../user-guide/npm-package/using-the-ast/ class=md-nav__link><span class=md-ellipsis> Using the AST </span></a></li></ul></nav></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3><div class="md-nav__link md-nav__container"><a href=../../../solidity-specification/ class="md-nav__link "><span class=md-ellipsis> Solidity Specification </span></a><label class="md-nav__link " for=__nav_3 id=__nav_3_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=1 aria-labelledby=__nav_3_label aria-expanded=false><label class=md-nav__title for=__nav_3><span class="md-nav__icon md-icon"></span> Solidity Specification </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../../solidity-specification/supported-versions/ class=md-nav__link><span class=md-ellipsis> Supported Versions </span></a></li><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_3><div class="md-nav__link md-nav__container"><a href=../../../solidity-specification/01-file-structure/ class="md-nav__link "><span class=md-ellipsis> 1. File Structure </span></a><label class="md-nav__link " for=__nav_3_3 id=__nav_3_3_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_3_label aria-expanded=false><label class=md-nav__title for=__nav_3_3><span class="md-nav__icon md-icon"></span> 1. File Structure </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../../solidity-specification/01-file-structure/01-license-specifiers/ class=md-nav__link><span class=md-ellipsis> 1.1. License Specifiers </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/01-file-structure/02-source-unit/ class=md-nav__link><span class=md-ellipsis> 1.2. Source Unit </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/01-file-structure/03-pragma-directives/ class=md-nav__link><span class=md-ellipsis> 1.3. Pragma Directives </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/01-file-structure/04-import-directives/ class=md-nav__link><span class=md-ellipsis> 1.4. Import Directives </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/01-file-structure/05-using-directives/ class=md-nav__link><span class=md-ellipsis> 1.5. Using Directives </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/01-file-structure/06-trivia/ class=md-nav__link><span class=md-ellipsis> 1.6. Trivia </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/01-file-structure/07-nat-spec-format/ class=md-nav__link><span class=md-ellipsis> 1.7. Nat Spec Format </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/01-file-structure/08-keywords/ class=md-nav__link><span class=md-ellipsis> 1.8. Keywords </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/01-file-structure/09-punctuation/ class=md-nav__link><span class=md-ellipsis> 1.9. Punctuation </span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_4><div class="md-nav__link md-nav__container"><a href=../../../solidity-specification/02-definitions/ class="md-nav__link "><span class=md-ellipsis> 2. Definitions </span></a><label class="md-nav__link " for=__nav_3_4 id=__nav_3_4_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_4_label aria-expanded=false><label class=md-nav__title for=__nav_3_4><span class="md-nav__icon md-icon"></span> 2. Definitions </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/01-contracts/ class=md-nav__link><span class=md-ellipsis> 2.1. Contracts </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/02-interfaces/ class=md-nav__link><span class=md-ellipsis> 2.2. Interfaces </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/03-libraries/ class=md-nav__link><span class=md-ellipsis> 2.3. Libraries </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/04-structs/ class=md-nav__link><span class=md-ellipsis> 2.4. Structs </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/05-enums/ class=md-nav__link><span class=md-ellipsis> 2.5. Enums </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/06-constants/ class=md-nav__link><span class=md-ellipsis> 2.6. Constants </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/07-state-variables/ class=md-nav__link><span class=md-ellipsis> 2.7. State Variables </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/08-functions/ class=md-nav__link><span class=md-ellipsis> 2.8. Functions </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/09-modifiers/ class=md-nav__link><span class=md-ellipsis> 2.9. Modifiers </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/10-events/ class=md-nav__link><span class=md-ellipsis> 2.10. Events </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/11-user-defined-value-types/ class=md-nav__link><span class=md-ellipsis> 2.11. User Defined Value Types </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/02-definitions/12-errors/ class=md-nav__link><span class=md-ellipsis> 2.12. Errors </span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_5><div class="md-nav__link md-nav__container"><a href=../../../solidity-specification/03-types/ class="md-nav__link "><span class=md-ellipsis> 3. Types </span></a><label class="md-nav__link " for=__nav_3_5 id=__nav_3_5_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_5_label aria-expanded=false><label class=md-nav__title for=__nav_3_5><span class="md-nav__icon md-icon"></span> 3. Types </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../../solidity-specification/03-types/01-advanced-types/ class=md-nav__link><span class=md-ellipsis> 3.1. Advanced Types </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/03-types/02-elementary-types/ class=md-nav__link><span class=md-ellipsis> 3.2. Elementary Types </span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_6><div class="md-nav__link md-nav__container"><a href=../../../solidity-specification/04-statements/ class="md-nav__link "><span class=md-ellipsis> 4. Statements </span></a><label class="md-nav__link " for=__nav_3_6 id=__nav_3_6_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_6_label aria-expanded=false><label class=md-nav__title for=__nav_3_6><span class="md-nav__icon md-icon"></span> 4. Statements </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../../solidity-specification/04-statements/01-blocks/ class=md-nav__link><span class=md-ellipsis> 4.1. Blocks </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/04-statements/02-declaration-statements/ class=md-nav__link><span class=md-ellipsis> 4.2. Declaration Statements </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/04-statements/03-control-statements/ class=md-nav__link><span class=md-ellipsis> 4.3. Control Statements </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/04-statements/04-error-handling/ class=md-nav__link><span class=md-ellipsis> 4.4. Error Handling </span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_7><div class="md-nav__link md-nav__container"><a href=../../../solidity-specification/05-expressions/ class="md-nav__link "><span class=md-ellipsis> 5. Expressions </span></a><label class="md-nav__link " for=__nav_3_7 id=__nav_3_7_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_7_label aria-expanded=false><label class=md-nav__title for=__nav_3_7><span class="md-nav__icon md-icon"></span> 5. Expressions </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../../solidity-specification/05-expressions/01-base-expressions/ class=md-nav__link><span class=md-ellipsis> 5.1. Base Expressions </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/05-expressions/02-function-calls/ class=md-nav__link><span class=md-ellipsis> 5.2. Function Calls </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/05-expressions/03-primary-expressions/ class=md-nav__link><span class=md-ellipsis> 5.3. Primary Expressions </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/05-expressions/04-numbers/ class=md-nav__link><span class=md-ellipsis> 5.4. Numbers </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/05-expressions/05-strings/ class=md-nav__link><span class=md-ellipsis> 5.5. Strings </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/05-expressions/06-identifiers/ class=md-nav__link><span class=md-ellipsis> 5.6. Identifiers </span></a></li></ul></nav></li><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle md-toggle--indeterminate" type=checkbox id=__nav_3_8><div class="md-nav__link md-nav__container"><a href=../../../solidity-specification/06-yul/ class="md-nav__link "><span class=md-ellipsis> 6. Yul </span></a><label class="md-nav__link " for=__nav_3_8 id=__nav_3_8_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=2 aria-labelledby=__nav_3_8_label aria-expanded=false><label class=md-nav__title for=__nav_3_8><span class="md-nav__icon md-icon"></span> 6. Yul </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../../solidity-specification/06-yul/01-yul-statements/ class=md-nav__link><span class=md-ellipsis> 6.1. Yul Statements </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/06-yul/02-yul-expressions/ class=md-nav__link><span class=md-ellipsis> 6.2. Yul Expressions </span></a></li><li class=md-nav__item><a href=../../../solidity-specification/06-yul/03-yul-keywords/ class=md-nav__link><span class=md-ellipsis> 6.3. Yul Keywords </span></a></li></ul></nav></li></ul></nav></li><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4 checked><div class="md-nav__link md-nav__container"><a href=../../ class="md-nav__link "><span class=md-ellipsis> Internals </span></a><label class="md-nav__link " for=__nav_4 id=__nav_4_label tabindex><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=1 aria-labelledby=__nav_4_label aria-expanded=true><label class=md-nav__title for=__nav_4><span class="md-nav__icon md-icon"></span> Internals </label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a href=../../repository-structure/ class=md-nav__link><span class=md-ellipsis> Repository Structure </span></a></li><li class=md-nav__item><a href=../../development/ class=md-nav__link><span class=md-ellipsis> Development </span></a></li><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle " type=checkbox id=__nav_4_4 checked><div class="md-nav__link md-nav__container"><a href=../ class="md-nav__link "><span class=md-ellipsis> Design Docs </span></a><label class="md-nav__link " for=__nav_4_4 id=__nav_4_4_label tabindex><span class="md-nav__icon md-icon"></span></label></div><nav class=md-nav data-md-level=2 aria-labelledby=__nav_4_4_label aria-expanded=true><label class=md-nav__title for=__nav_4_4><span class="md-nav__icon md-icon"></span> Design Docs </label><ul class=md-nav__list data-md-scrollfix><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" type=checkbox id=__toc><label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> Language Definition v2 </span><span class="md-nav__icon md-icon"></span></label><a href=./ class="md-nav__link md-nav__link--active"><span class=md-ellipsis> Language Definition v2 </span></a><nav class="md-nav md-nav--secondary" aria-label="Table of contents"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> Table of contents </label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#cst class=md-nav__link><span class=md-ellipsis> CST </span></a></li><li class=md-nav__item><a href=#ast class=md-nav__link><span class=md-ellipsis> AST </span></a></li><li class=md-nav__item><a href=#versioning class=md-nav__link><span class=md-ellipsis> Versioning </span></a></li><li class=md-nav__item><a href=#terminals class=md-nav__link><span class=md-ellipsis> Terminals </span></a><nav class=md-nav aria-label=Terminals><ul class=md-nav__list><li class=md-nav__item><a href=#token-items class=md-nav__link><span class=md-ellipsis> Token Items </span></a></li><li class=md-nav__item><a href=#keyword-items class=md-nav__link><span class=md-ellipsis> Keyword Items </span></a></li><li class=md-nav__item><a href=#trivia-items class=md-nav__link><span class=md-ellipsis> Trivia Items </span></a></li><li class=md-nav__item><a href=#fragment-items class=md-nav__link><span class=md-ellipsis> Fragment Items </span></a></li></ul></nav></li><li class=md-nav__item><a href=#nonterminals class=md-nav__link><span class=md-ellipsis> Nonterminals </span></a><nav class=md-nav aria-label=Nonterminals><ul class=md-nav__list><li class=md-nav__item><a href=#struct-items class=md-nav__link><span class=md-ellipsis> Struct Items </span></a></li><li class=md-nav__item><a href=#enum-items class=md-nav__link><span class=md-ellipsis> Enum Items </span></a></li><li class=md-nav__item><a href=#repeated-items class=md-nav__link><span class=md-ellipsis> Repeated Items </span></a></li><li class=md-nav__item><a href=#separated-items class=md-nav__link><span class=md-ellipsis> Separated Items </span></a></li><li class=md-nav__item><a href=#precedence-items class=md-nav__link><span class=md-ellipsis> Precedence Items </span></a></li></ul></nav></li><li class=md-nav__item><a href=#error-recovery class=md-nav__link><span class=md-ellipsis> Error Recovery </span></a></li><li class=md-nav__item><a href=#public-api-changes class=md-nav__link><span class=md-ellipsis> Public API Changes </span></a></li><li class=md-nav__item><a href=#visitors-and-cursors class=md-nav__link><span class=md-ellipsis> Visitors and Cursors </span></a></li></ul></nav></li></ul></nav></li></ul></nav></li></ul></nav></div></div></div><div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--secondary" aria-label="Table of contents"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> Table of contents </label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a href=#cst class=md-nav__link><span class=md-ellipsis> CST </span></a></li><li class=md-nav__item><a href=#ast class=md-nav__link><span class=md-ellipsis> AST </span></a></li><li class=md-nav__item><a href=#versioning class=md-nav__link><span class=md-ellipsis> Versioning </span></a></li><li class=md-nav__item><a href=#terminals class=md-nav__link><span class=md-ellipsis> Terminals </span></a><nav class=md-nav aria-label=Terminals><ul class=md-nav__list><li class=md-nav__item><a href=#token-items class=md-nav__link><span class=md-ellipsis> Token Items </span></a></li><li class=md-nav__item><a href=#keyword-items class=md-nav__link><span class=md-ellipsis> Keyword Items </span></a></li><li class=md-nav__item><a href=#trivia-items class=md-nav__link><span class=md-ellipsis> Trivia Items </span></a></li><li class=md-nav__item><a href=#fragment-items class=md-nav__link><span class=md-ellipsis> Fragment Items </span></a></li></ul></nav></li><li class=md-nav__item><a href=#nonterminals class=md-nav__link><span class=md-ellipsis> Nonterminals </span></a><nav class=md-nav aria-label=Nonterminals><ul class=md-nav__list><li class=md-nav__item><a href=#struct-items class=md-nav__link><span class=md-ellipsis> Struct Items </span></a></li><li class=md-nav__item><a href=#enum-items class=md-nav__link><span class=md-ellipsis> Enum Items </span></a></li><li class=md-nav__item><a href=#repeated-items class=md-nav__link><span class=md-ellipsis> Repeated Items </span></a></li><li class=md-nav__item><a href=#separated-items class=md-nav__link><span class=md-ellipsis> Separated Items </span></a></li><li class=md-nav__item><a href=#precedence-items class=md-nav__link><span class=md-ellipsis> Precedence Items </span></a></li></ul></nav></li><li class=md-nav__item><a href=#error-recovery class=md-nav__link><span class=md-ellipsis> Error Recovery </span></a></li><li class=md-nav__item><a href=#public-api-changes class=md-nav__link><span class=md-ellipsis> Public API Changes </span></a></li><li class=md-nav__item><a href=#visitors-and-cursors class=md-nav__link><span class=md-ellipsis> Visitors and Cursors </span></a></li></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><a href=https://github.com/NomicFoundation/slang/edit/main/documentation/public/internals/design-docs/language-definition-v2.md title="Edit this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M8 12h8v2H8zm2 8H6V4h7v5h5v3.1l2-2V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4zm-2-2h4.1l.9-.9V16H8zm12.2-5c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1z"/></svg></a><a href=https://github.com/NomicFoundation/slang/blob/main/documentation/public/internals/design-docs/language-definition-v2.md title="View source of this page" class="md-content__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M17 18c.56 0 1 .44 1 1s-.44 1-1 1-1-.44-1-1 .44-1 1-1m0-3c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5a2.5 2.5 0 0 1-2.5-2.5 2.5 2.5 0 0 1 2.5-2.5 2.5 2.5 0 0 1 2.5 2.5 2.5 2.5 0 0 1-2.5 2.5M9.27 20H6V4h7v5h5v4.07c.7.08 1.36.25 2 .49V8l-6-6H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h4.5a8.2 8.2 0 0 1-1.23-2"/></svg></a><h1 id=language-definition-v2>Language Definition v2<a class=headerlink href=#language-definition-v2 title="Permanent link">#</a></h1><p>This document describes the new language definition model (AKA DSL v2), and the features/possibilities it enables for both syntax and semantic analysis. Each section describes a part of the definition model, and how it can affect the scanner, parser, CST, and AST.</p><p>This is a collection of different discussions we had over the last few weeks, and can (and should) be broken down into smaller work items if needed. It should be possible to map the current definition to the old one, so that we do incremental progress, instead of rewriting everything at once.</p><h2 id=cst>CST<a class=headerlink href=#cst title="Permanent link">#</a></h2><p>We currently produce an untyped tree of nodes. It holds all parts of the input (byte for byte), even whitespace, comments, and unrecognized (skipped) parts. We can reconstruct the original input back from the CST, just by iterating on nodes in order. For memory/performance reasons, we don't hold positions/location information in the tree, but they are calculated during iterating/visiting the tree.</p><p>The CST is useful for many use cases:</p><ul><li>Tools that only want to deal with document contents, like formatters, and syntax-only linters.</li><li>For visitors/rewriters that want to run on certain nodes, regardless of their position/parent types.</li><li>Reconstructing the original input, including trivia/whitespace, and any skipped (unrecognized) parts.</li></ul><p>Here is an example of the node type, similar to what we have now:</p><div class=highlight><pre><span></span><code><a id=__codelineno-0-1 name=__codelineno-0-1 href=#__codelineno-0-1></a><span class=k>pub</span><span class=w> </span><span class=k>enum</span><span class=w> </span><span class=nc>Node</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-2 name=__codelineno-0-2 href=#__codelineno-0-2></a><span class=w>    </span><span class=n>Terminal</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>node</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;</span><span class=w> </span><span class=p>},</span>
<a id=__codelineno-0-3 name=__codelineno-0-3 href=#__codelineno-0-3></a><span class=w>    </span><span class=n>Nonterminal</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>node</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>NonterminalNode</span><span class=o>&gt;</span><span class=w> </span><span class=p>},</span>
<a id=__codelineno-0-4 name=__codelineno-0-4 href=#__codelineno-0-4></a><span class=p>}</span>
<a id=__codelineno-0-5 name=__codelineno-0-5 href=#__codelineno-0-5></a>
<a id=__codelineno-0-6 name=__codelineno-0-6 href=#__codelineno-0-6></a><span class=k>pub</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=nc>TerminalNode</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-7 name=__codelineno-0-7 href=#__codelineno-0-7></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>kind</span><span class=p>:</span><span class=w> </span><span class=nc>TerminalKind</span><span class=p>,</span>
<a id=__codelineno-0-8 name=__codelineno-0-8 href=#__codelineno-0-8></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>text</span><span class=p>:</span><span class=w> </span><span class=nb>String</span><span class=p>,</span>
<a id=__codelineno-0-9 name=__codelineno-0-9 href=#__codelineno-0-9></a><span class=p>}</span>
<a id=__codelineno-0-10 name=__codelineno-0-10 href=#__codelineno-0-10></a>
<a id=__codelineno-0-11 name=__codelineno-0-11 href=#__codelineno-0-11></a><span class=k>pub</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=nc>NonterminalNode</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-0-12 name=__codelineno-0-12 href=#__codelineno-0-12></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>kind</span><span class=p>:</span><span class=w> </span><span class=nc>NonterminalKind</span><span class=p>,</span>
<a id=__codelineno-0-13 name=__codelineno-0-13 href=#__codelineno-0-13></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>text_length</span><span class=p>:</span><span class=w> </span><span class=nc>TextIndex</span><span class=p>,</span>
<a id=__codelineno-0-14 name=__codelineno-0-14 href=#__codelineno-0-14></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>children</span><span class=p>:</span><span class=w> </span><span class=nb>Vec</span><span class=o>&lt;</span><span class=n>Node</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-0-15 name=__codelineno-0-15 href=#__codelineno-0-15></a><span class=p>}</span>
</code></pre></div><h2 id=ast>AST<a class=headerlink href=#ast title="Permanent link">#</a></h2><p>We intend to also produce a strongly typed tree (structs and enums). Having strong types provides safety/correctness guarantees for users. It also allows us to generate visitor and rewriter APIs automatically.</p><p>Each AST node should provide an API to get the underlying CST node, where users can iterate over the actual terminals as they appear in input, and get their position in the source code. However, this is a one-way operation. CST nodes don't hold references to their AST nodes.</p><p>Note: some compilers drop syntactic elements that don't carry semantic information from their AST (like semicolons, or commas). However, we don't make that distinction, as we intend to implement further analysis in the form of micro-passes, that each can rewrite and pick parts of the tree that are relevant to them. So our initial tree (AST) should be complete.</p><h2 id=versioning>Versioning<a class=headerlink href=#versioning title="Permanent link">#</a></h2><p>The biggest benefit of the new language definition is that it allows scanners and parsers to attempt parsing input belonging to any language version, and report errors afterwards if the input is not valid for the selected version. This is a huge benefit over existing parsers, where they will either parse an inaccurate superset of all versions, or they parse a specific version, and produce unhelpful errors like <code>Unrecognized 'abstract' keyword</code> when the current language version doesn't support it.</p><p>Not only we will be able to recover from such errors and continue parsing, producing an accurate/complete tree at the end, but we will also be able to produce much better errors like: <code>The 'abstract' keyword is not supported in the current version X. Please upgrade to version Y instead to be able to use it</code>.</p><h2 id=terminals>Terminals<a class=headerlink href=#terminals title="Permanent link">#</a></h2><h3 id=token-items>Token Items<a class=headerlink href=#token-items title="Permanent link">#</a></h3><p>Tokens consist of one or more <code>TokenDefinition</code>. Each definition is separate/unique, but produces the same <code>TerminalKind</code>. This is useful for tokens like <code>DecimalLiteral</code> and <code>HexLiteral</code> who can have multiple forms, but each form is enabled or disabled in certain versions of the language.</p><p>All definitions have a unique <code>Scanner</code>, and they can be combined in the same trie/FSM to produce a single token at each position in the input. Afterwards, the scanner can compare the definition's <code>enabled</code> property with the current language version, adding an error if they don't match, but continue parsing anyway.</p><h3 id=keyword-items>Keyword Items<a class=headerlink href=#keyword-items title="Permanent link">#</a></h3><p>Keywords also contribute a <code>TerminalKind</code>, and consist of one or more <code>KeywordDefinition</code>. But they have additional semantics:</p><p>First, instead of defining a regular <code>Scanner</code>, it defines a <code>KeywordValue</code> that produces a finite set of possibilities. Most only produce one value (like <code>abstract</code> or <code>contract</code>), but some can produce multiple, like <code>bytesN</code> or <code>fixedMxN</code>, that can have different values for <code>M</code> and <code>N</code>. This is important for us to build hash sets and quickly check for membership.</p><p>Second, because keywords can also overlap with identifiers, each keyword has an <code>identifier</code> property that refers to which identifier token they can match. Instead of being part of same trie/FSM as tokens, whenever we want to scan a keyword, we try to scan its identifier instead. Afterwards, we check if its contents match one of the values of the keyword.</p><p>Third, they have two additional <code>reserved</code> property. We should use these when we scan identifiers, to make sure that the resulting identifier doesn't match a reserved keyword, and if so, we should report an error, but continue parsing.</p><p>Unique to Solidity, keywords can be <code>reserved</code> in versions before or after the versions they are <code>enabled</code> in. They can also be not <code>reserved</code> in versions before or after the versions they stop being <code>enabled</code> in. So we have to have these additional checks, to be able to catch cases like when a certain input can both be a keyword and an identifier, or neither.</p><p>We should also be able to generate a public API <code>is_keyword(TerminalKind)</code> for users to conveniently detect them if needed.</p><h3 id=trivia-items>Trivia Items<a class=headerlink href=#trivia-items title="Permanent link">#</a></h3><p>Trivia items are similar tokens, contributing their own <code>TerminalKind</code>. They are referred to from the language's top-level <code>leading_trivia</code> and <code>trailing_trivia</code> properties. Before and after each token, the scanner should try to scan these tokens, collecting them in a flat list.</p><p>Previously, we used to create many <code>LeadingTrivia</code> and <code>TrailingTrivia</code> nodes that hold whitespace/comments. Not only this is wasteful memory-wise, it is also unnatural/unexpected to wrap whitespace in nonterminal nodes. Instead, I propose treating them like any other token, and storing them as siblings to the tokens they belong to (in-order). Not only this is simpler, it is also more efficient, and is natural to how input is consumed and produced.</p><h3 id=fragment-items>Fragment Items<a class=headerlink href=#fragment-items title="Permanent link">#</a></h3><p>Fragments are not visible to users, and don't contribute a <code>TerminalKind</code>. They are just a utility used to refactor common parts of the grammar, and avoid duplication. During processing the language definition, they are inlined wherever they are referenced.</p><h2 id=nonterminals>Nonterminals<a class=headerlink href=#nonterminals title="Permanent link">#</a></h2><h3 id=struct-items>Struct Items<a class=headerlink href=#struct-items title="Permanent link">#</a></h3><p>Structs represent a flat list (sequence) of typed fields. They are the simplest nonterminal, and generate a <code>struct</code> AST type. Their fields match 1-1 with the item fields. The struct name contributes a <code>NonterminalKind</code>.</p><p>Each field can be either <code>Required(T)</code> or <code>Optional(T)</code>. Required fields are always present and parsed. Optional fields can be omitted if they don't exist, and are represented with Rust's <code>Option&lt;T&gt;</code> type (or TypeScript <code>T | undefined</code>). However, optional fields have an additional <code>enabled</code> property. After parsing optional fields, we should compare them with the current language version, and produce errors if they don't match, but continue parsing normally.</p><p>The type of each field can be a <code>Nonterminal(T)</code> or <code>Terminal(Set&lt;T&gt;)</code>. A nonterminal field refers to another item, and holds its type. A terminal field refers to one or more terminal items (all valid in this position), and is of type <code>TerminalNode</code>.</p><p>Additionally, the struct also stores the CST node that holds its contents:</p><div class=highlight><span class=filename>Definition</span><pre><span></span><code><a id=__codelineno-1-1 name=__codelineno-1-1 href=#__codelineno-1-1></a><span class=n>Struct</span><span class=p>(</span>
<a id=__codelineno-1-2 name=__codelineno-1-2 href=#__codelineno-1-2></a><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>ParametersDeclaration</span><span class=p>,</span>
<a id=__codelineno-1-3 name=__codelineno-1-3 href=#__codelineno-1-3></a><span class=w>    </span><span class=n>fields</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<a id=__codelineno-1-4 name=__codelineno-1-4 href=#__codelineno-1-4></a><span class=w>        </span><span class=n>open_paren</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Required</span><span class=p>(</span><span class=n>Terminal</span><span class=p>([</span><span class=n>OpenParen</span><span class=p>])),</span>
<a id=__codelineno-1-5 name=__codelineno-1-5 href=#__codelineno-1-5></a><span class=w>        </span><span class=n>parameters</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Required</span><span class=p>(</span><span class=n>Nonterminal</span><span class=p>(</span><span class=n>Parameters</span><span class=p>)),</span>
<a id=__codelineno-1-6 name=__codelineno-1-6 href=#__codelineno-1-6></a><span class=w>        </span><span class=n>close_paren</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Required</span><span class=p>(</span><span class=n>Terminal</span><span class=p>([</span><span class=n>CloseParen</span><span class=p>]))</span>
<a id=__codelineno-1-7 name=__codelineno-1-7 href=#__codelineno-1-7></a><span class=w>    </span><span class=p>)</span>
<a id=__codelineno-1-8 name=__codelineno-1-8 href=#__codelineno-1-8></a><span class=p>)</span>
</code></pre></div><div class=highlight><span class=filename>AST Type</span><pre><span></span><code><a id=__codelineno-2-1 name=__codelineno-2-1 href=#__codelineno-2-1></a><span class=k>pub</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=nc>ParametersDeclaration</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-2-2 name=__codelineno-2-2 href=#__codelineno-2-2></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>open_paren</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-2-3 name=__codelineno-2-3 href=#__codelineno-2-3></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>parameters</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>Parameters</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-2-4 name=__codelineno-2-4 href=#__codelineno-2-4></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>close_paren</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-2-5 name=__codelineno-2-5 href=#__codelineno-2-5></a>
<a id=__codelineno-2-6 name=__codelineno-2-6 href=#__codelineno-2-6></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>cst</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>NonterminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-2-7 name=__codelineno-2-7 href=#__codelineno-2-7></a><span class=p>}</span>
</code></pre></div><h3 id=enum-items>Enum Items<a class=headerlink href=#enum-items title="Permanent link">#</a></h3><p>Enums represent an ordered choice operator of multiple variants (possibilities). The enum name itself does NOT contribute a <code>NonterminalKind</code>, since it will always result in one of its variants (each with a unique <code>TerminalKind</code> or a <code>NonterminalKind</code>. They only exist in the AST, and don't affect the CST at all.</p><p>We attempt to parse each variant (in-order), and choose the first one that succeeds. However, each variant can have an additional <code>enabled</code> property. We should always try to parse the variants that are valid in the current version first, and if not, still parse the rest, but produce an error afterwards. The fields of each variant are parsed similar to a struct fields (example above).</p><div class=highlight><span class=filename>Definition</span><pre><span></span><code><a id=__codelineno-3-1 name=__codelineno-3-1 href=#__codelineno-3-1></a><span class=n>Enum</span><span class=p>(</span>
<a id=__codelineno-3-2 name=__codelineno-3-2 href=#__codelineno-3-2></a><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>FunctionBody</span><span class=p>,</span>
<a id=__codelineno-3-3 name=__codelineno-3-3 href=#__codelineno-3-3></a><span class=w>    </span><span class=n>variants</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-3-4 name=__codelineno-3-4 href=#__codelineno-3-4></a><span class=w>        </span><span class=n>EnumVariant</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Block</span><span class=p>,</span><span class=w> </span><span class=n>reference</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Block</span><span class=p>),</span>
<a id=__codelineno-3-5 name=__codelineno-3-5 href=#__codelineno-3-5></a><span class=w>        </span><span class=n>EnumVariant</span><span class=p>(</span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Semicolon</span><span class=p>,</span><span class=w> </span><span class=n>reference</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Semicolon</span><span class=p>)</span>
<a id=__codelineno-3-6 name=__codelineno-3-6 href=#__codelineno-3-6></a><span class=w>    </span><span class=p>]</span>
<a id=__codelineno-3-7 name=__codelineno-3-7 href=#__codelineno-3-7></a><span class=p>)</span>
</code></pre></div><div class=highlight><span class=filename>AST Type</span><pre><span></span><code><a id=__codelineno-4-1 name=__codelineno-4-1 href=#__codelineno-4-1></a><span class=k>pub</span><span class=w> </span><span class=k>enum</span><span class=w> </span><span class=nc>FunctionBody</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-2 name=__codelineno-4-2 href=#__codelineno-4-2></a><span class=w>    </span><span class=n>Block</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-3 name=__codelineno-4-3 href=#__codelineno-4-3></a><span class=w>        </span><span class=n>block</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>Block</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-4-4 name=__codelineno-4-4 href=#__codelineno-4-4></a>
<a id=__codelineno-4-5 name=__codelineno-4-5 href=#__codelineno-4-5></a><span class=w>        </span><span class=n>cst</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>NonterminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-4-6 name=__codelineno-4-6 href=#__codelineno-4-6></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-4-7 name=__codelineno-4-7 href=#__codelineno-4-7></a><span class=w>    </span><span class=n>Semicolon</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-4-8 name=__codelineno-4-8 href=#__codelineno-4-8></a><span class=w>        </span><span class=n>semicolon</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-4-9 name=__codelineno-4-9 href=#__codelineno-4-9></a>
<a id=__codelineno-4-10 name=__codelineno-4-10 href=#__codelineno-4-10></a><span class=w>        </span><span class=n>cst</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>NonterminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-4-11 name=__codelineno-4-11 href=#__codelineno-4-11></a><span class=w>    </span><span class=p>},</span>
<a id=__codelineno-4-12 name=__codelineno-4-12 href=#__codelineno-4-12></a><span class=p>}</span>
</code></pre></div><h3 id=repeated-items>Repeated Items<a class=headerlink href=#repeated-items title="Permanent link">#</a></h3><p>Repeated items represent a list of items of the same kind. The item name contributes a <code>NonterminalKind</code>. The AST type is a wrapper around a <code>Vec&lt;T&gt;</code>, with any utilities we need to add for convenience.</p><p>It has an <code>allow_empty</code> boolean property, which allows parsing zero items. If it is <code>false</code>, we should still allow parsing zero items, but produce an error afterwards.</p><div class=highlight><span class=filename>Definition</span><pre><span></span><code><a id=__codelineno-5-1 name=__codelineno-5-1 href=#__codelineno-5-1></a><span class=n>Repeated</span><span class=p>(</span>
<a id=__codelineno-5-2 name=__codelineno-5-2 href=#__codelineno-5-2></a><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>FunctionAttributes</span><span class=p>,</span>
<a id=__codelineno-5-3 name=__codelineno-5-3 href=#__codelineno-5-3></a><span class=w>    </span><span class=n>repeated</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>FunctionAttribute</span><span class=p>,</span>
<a id=__codelineno-5-4 name=__codelineno-5-4 href=#__codelineno-5-4></a><span class=w>    </span><span class=n>allow_empty</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
<a id=__codelineno-5-5 name=__codelineno-5-5 href=#__codelineno-5-5></a><span class=p>)</span>
</code></pre></div><div class=highlight><span class=filename>AST Type</span><pre><span></span><code><a id=__codelineno-6-1 name=__codelineno-6-1 href=#__codelineno-6-1></a><span class=k>pub</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=nc>FunctionAttributes</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-6-2 name=__codelineno-6-2 href=#__codelineno-6-2></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>items</span><span class=p>:</span><span class=w> </span><span class=nb>Vec</span><span class=o>&lt;</span><span class=n>Rc</span><span class=o>&lt;</span><span class=n>FunctionAttribute</span><span class=o>&gt;&gt;</span>
<a id=__codelineno-6-3 name=__codelineno-6-3 href=#__codelineno-6-3></a>
<a id=__codelineno-6-4 name=__codelineno-6-4 href=#__codelineno-6-4></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>cst</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>NonterminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-6-5 name=__codelineno-6-5 href=#__codelineno-6-5></a><span class=p>}</span>
</code></pre></div><h3 id=separated-items>Separated Items<a class=headerlink href=#separated-items title="Permanent link">#</a></h3><p>Separated items represent a list of items of the same kind, separated by a delimiter. The item name contributes a <code>NonterminalKind</code>. The AST type is a wrapper around two <code>Vec&lt;T&gt;</code> for items and their delimiters, with any utilities we need to add for convenience. For example, we should add APIs to create iterators for only the separated items, the separators, or both (in-order).</p><p>It has an <code>allow_empty</code> boolean property, which allows parsing zero items. If it is <code>false</code>, we should still allow parsing zero items, but produce an error afterwards. We should also allow parsing a trailing separator at the end, but still produce an error afterwards.</p><div class=highlight><span class=filename>Definition</span><pre><span></span><code><a id=__codelineno-7-1 name=__codelineno-7-1 href=#__codelineno-7-1></a><span class=n>Separated</span><span class=p>(</span>
<a id=__codelineno-7-2 name=__codelineno-7-2 href=#__codelineno-7-2></a><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>EventParameters</span><span class=p>,</span>
<a id=__codelineno-7-3 name=__codelineno-7-3 href=#__codelineno-7-3></a><span class=w>    </span><span class=n>separated</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>EventParameter</span><span class=p>,</span>
<a id=__codelineno-7-4 name=__codelineno-7-4 href=#__codelineno-7-4></a><span class=w>    </span><span class=n>separator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Comma</span><span class=p>,</span>
<a id=__codelineno-7-5 name=__codelineno-7-5 href=#__codelineno-7-5></a><span class=w>    </span><span class=n>allow_empty</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=kc>true</span>
<a id=__codelineno-7-6 name=__codelineno-7-6 href=#__codelineno-7-6></a><span class=p>)</span>
</code></pre></div><div class=highlight><span class=filename>AST Type</span><pre><span></span><code><a id=__codelineno-8-1 name=__codelineno-8-1 href=#__codelineno-8-1></a><span class=k>pub</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=nc>EventParameters</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-8-2 name=__codelineno-8-2 href=#__codelineno-8-2></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>items</span><span class=p>:</span><span class=w> </span><span class=nb>Vec</span><span class=o>&lt;</span><span class=n>Rc</span><span class=o>&lt;</span><span class=n>EventParameter</span><span class=o>&gt;&gt;</span>
<a id=__codelineno-8-3 name=__codelineno-8-3 href=#__codelineno-8-3></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>separators</span><span class=p>:</span><span class=w> </span><span class=nb>Vec</span><span class=o>&lt;</span><span class=n>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;&gt;</span>
<a id=__codelineno-8-4 name=__codelineno-8-4 href=#__codelineno-8-4></a>
<a id=__codelineno-8-5 name=__codelineno-8-5 href=#__codelineno-8-5></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>cst</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>NonterminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-8-6 name=__codelineno-8-6 href=#__codelineno-8-6></a><span class=p>}</span>
</code></pre></div><h3 id=precedence-items>Precedence Items<a class=headerlink href=#precedence-items title="Permanent link">#</a></h3><p>This is perhaps the most complex nonterminal. It still uses the same PRATT algorithm from the previous implementation (no changes there), but adapted for the new AST types. It has two lists:</p><p>First, a list of <code>precedence_expressions</code>, with each expression having a list of operators. Each operator has its own versioning (<code>enabled</code> property), a list of fields, and a model (prefix/postfix/binary).</p><p>The operators from all expressions are flattened and combined in the parent PRATT parser. That grouping is only used to indicate that some operators can produce the same <code>PrecedenceExpression</code> name. However, we should exclude operators that don't match the current language version. This is useful for things like <code>ExponentiationExpression</code> where it has two operators with different associativity, but defined in enabled/disabled in different versions.</p><p>Second, a list of <code>primary_expressions</code>, with their own versioning (<code>enabled</code> property) as well. We should try to parse them as an operator (similar to <code>EnumItem</code>), and produce an error if the version doesn't match afterwards.</p><p>It is important to note that the item name doesn't contribute a <code>NonterminalKind</code>, but each <code>PrecedenceExpression</code> under it contributes one.</p><div class=highlight><span class=filename>Definition</span><pre><span></span><code><a id=__codelineno-9-1 name=__codelineno-9-1 href=#__codelineno-9-1></a><span class=n>Precedence</span><span class=p>(</span>
<a id=__codelineno-9-2 name=__codelineno-9-2 href=#__codelineno-9-2></a><span class=w>    </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Expression</span><span class=p>,</span>
<a id=__codelineno-9-3 name=__codelineno-9-3 href=#__codelineno-9-3></a><span class=w>    </span><span class=n>precedence_expressions</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-9-4 name=__codelineno-9-4 href=#__codelineno-9-4></a><span class=w>        </span><span class=n>PrecedenceExpression</span><span class=p>(</span>
<a id=__codelineno-9-5 name=__codelineno-9-5 href=#__codelineno-9-5></a><span class=w>            </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>AdditionExpression</span><span class=p>,</span>
<a id=__codelineno-9-6 name=__codelineno-9-6 href=#__codelineno-9-6></a><span class=w>            </span><span class=n>operators</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=n>PrecedenceOperator</span><span class=p>(</span>
<a id=__codelineno-9-7 name=__codelineno-9-7 href=#__codelineno-9-7></a><span class=w>                </span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>BinaryLeftAssociative</span><span class=p>,</span>
<a id=__codelineno-9-8 name=__codelineno-9-8 href=#__codelineno-9-8></a><span class=w>                </span><span class=n>fields</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>operator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Required</span><span class=p>(</span><span class=n>Terminal</span><span class=p>([</span><span class=n>Plus</span><span class=p>])))</span>
<a id=__codelineno-9-9 name=__codelineno-9-9 href=#__codelineno-9-9></a><span class=w>            </span><span class=p>)]</span>
<a id=__codelineno-9-10 name=__codelineno-9-10 href=#__codelineno-9-10></a><span class=w>        </span><span class=p>),</span>
<a id=__codelineno-9-11 name=__codelineno-9-11 href=#__codelineno-9-11></a><span class=w>        </span><span class=n>PrecedenceExpression</span><span class=p>(</span>
<a id=__codelineno-9-12 name=__codelineno-9-12 href=#__codelineno-9-12></a><span class=w>            </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>FunctionCallExpression</span><span class=p>,</span>
<a id=__codelineno-9-13 name=__codelineno-9-13 href=#__codelineno-9-13></a><span class=w>            </span><span class=n>operators</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=n>PrecedenceOperator</span><span class=p>(</span>
<a id=__codelineno-9-14 name=__codelineno-9-14 href=#__codelineno-9-14></a><span class=w>                </span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Postfix</span><span class=p>,</span>
<a id=__codelineno-9-15 name=__codelineno-9-15 href=#__codelineno-9-15></a><span class=w>                </span><span class=n>fields</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span>
<a id=__codelineno-9-16 name=__codelineno-9-16 href=#__codelineno-9-16></a><span class=w>                    </span><span class=n>open_paren</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Required</span><span class=p>(</span><span class=n>Terminal</span><span class=p>([</span><span class=n>OpenParen</span><span class=p>])),</span>
<a id=__codelineno-9-17 name=__codelineno-9-17 href=#__codelineno-9-17></a><span class=w>                    </span><span class=n>arguments</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Required</span><span class=p>(</span><span class=n>Nonterminal</span><span class=p>(</span><span class=n>Arguments</span><span class=p>)),</span>
<a id=__codelineno-9-18 name=__codelineno-9-18 href=#__codelineno-9-18></a><span class=w>                    </span><span class=n>close_paren</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Required</span><span class=p>(</span><span class=n>Terminal</span><span class=p>([</span><span class=n>CloseParen</span><span class=p>]))</span>
<a id=__codelineno-9-19 name=__codelineno-9-19 href=#__codelineno-9-19></a><span class=w>                </span><span class=p>)</span>
<a id=__codelineno-9-20 name=__codelineno-9-20 href=#__codelineno-9-20></a><span class=w>            </span><span class=p>)]</span>
<a id=__codelineno-9-21 name=__codelineno-9-21 href=#__codelineno-9-21></a><span class=w>        </span><span class=p>),</span>
<a id=__codelineno-9-22 name=__codelineno-9-22 href=#__codelineno-9-22></a><span class=w>        </span><span class=n>PrecedenceExpression</span><span class=p>(</span>
<a id=__codelineno-9-23 name=__codelineno-9-23 href=#__codelineno-9-23></a><span class=w>            </span><span class=n>name</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>NegationExpression</span><span class=p>,</span>
<a id=__codelineno-9-24 name=__codelineno-9-24 href=#__codelineno-9-24></a><span class=w>            </span><span class=n>operators</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span><span class=n>PrecedenceOperator</span><span class=p>(</span>
<a id=__codelineno-9-25 name=__codelineno-9-25 href=#__codelineno-9-25></a><span class=w>                </span><span class=n>model</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Prefix</span><span class=p>,</span>
<a id=__codelineno-9-26 name=__codelineno-9-26 href=#__codelineno-9-26></a><span class=w>                </span><span class=n>fields</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>(</span><span class=n>operator</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Required</span><span class=p>(</span><span class=n>Terminal</span><span class=p>([</span><span class=n>Not</span><span class=p>])))</span>
<a id=__codelineno-9-27 name=__codelineno-9-27 href=#__codelineno-9-27></a><span class=w>            </span><span class=p>)]</span>
<a id=__codelineno-9-28 name=__codelineno-9-28 href=#__codelineno-9-28></a><span class=w>        </span><span class=p>)</span>
<a id=__codelineno-9-29 name=__codelineno-9-29 href=#__codelineno-9-29></a><span class=w>    </span><span class=p>)],</span>
<a id=__codelineno-9-30 name=__codelineno-9-30 href=#__codelineno-9-30></a><span class=w>    </span><span class=n>primary_expressions</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=p>[</span>
<a id=__codelineno-9-31 name=__codelineno-9-31 href=#__codelineno-9-31></a><span class=w>        </span><span class=n>PrimaryExpression</span><span class=p>(</span><span class=n>expression</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>Identifier</span><span class=p>),</span>
<a id=__codelineno-9-32 name=__codelineno-9-32 href=#__codelineno-9-32></a><span class=w>        </span><span class=n>PrimaryExpression</span><span class=p>(</span><span class=n>expression</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>NumberLiteral</span><span class=p>),</span>
<a id=__codelineno-9-33 name=__codelineno-9-33 href=#__codelineno-9-33></a><span class=w>        </span><span class=n>PrimaryExpression</span><span class=p>(</span><span class=n>expression</span><span class=w> </span><span class=o>=</span><span class=w> </span><span class=n>StringLiteral</span><span class=p>)</span>
<a id=__codelineno-9-34 name=__codelineno-9-34 href=#__codelineno-9-34></a><span class=w>    </span><span class=p>]</span>
<a id=__codelineno-9-35 name=__codelineno-9-35 href=#__codelineno-9-35></a><span class=p>)</span>
</code></pre></div><div class=highlight><span class=filename>AST Type</span><pre><span></span><code><a id=__codelineno-10-1 name=__codelineno-10-1 href=#__codelineno-10-1></a><span class=k>pub</span><span class=w> </span><span class=k>enum</span><span class=w> </span><span class=nc>Expression</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-2 name=__codelineno-10-2 href=#__codelineno-10-2></a><span class=w>    </span><span class=n>AdditionExpression</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>expression</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>AdditionExpression</span><span class=o>&gt;</span><span class=w> </span><span class=p>},</span>
<a id=__codelineno-10-3 name=__codelineno-10-3 href=#__codelineno-10-3></a><span class=w>    </span><span class=n>FunctionCallExpression</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>expression</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>FunctionCallExpression</span><span class=o>&gt;</span><span class=w> </span><span class=p>},</span>
<a id=__codelineno-10-4 name=__codelineno-10-4 href=#__codelineno-10-4></a><span class=w>    </span><span class=n>NegationExpression</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>expression</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>NegationExpression</span><span class=o>&gt;</span><span class=w> </span><span class=p>},</span>
<a id=__codelineno-10-5 name=__codelineno-10-5 href=#__codelineno-10-5></a>
<a id=__codelineno-10-6 name=__codelineno-10-6 href=#__codelineno-10-6></a><span class=w>    </span><span class=n>Identifier</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>expression</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;</span><span class=w> </span><span class=p>},</span>
<a id=__codelineno-10-7 name=__codelineno-10-7 href=#__codelineno-10-7></a><span class=w>    </span><span class=n>NumberLiteral</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>expression</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;</span><span class=w> </span><span class=p>},</span>
<a id=__codelineno-10-8 name=__codelineno-10-8 href=#__codelineno-10-8></a><span class=w>    </span><span class=n>StringLiteral</span><span class=w> </span><span class=p>{</span><span class=w> </span><span class=n>expression</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;</span><span class=w> </span><span class=p>},</span>
<a id=__codelineno-10-9 name=__codelineno-10-9 href=#__codelineno-10-9></a><span class=p>}</span>
<a id=__codelineno-10-10 name=__codelineno-10-10 href=#__codelineno-10-10></a>
<a id=__codelineno-10-11 name=__codelineno-10-11 href=#__codelineno-10-11></a><span class=k>pub</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=nc>AdditionExpression</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-12 name=__codelineno-10-12 href=#__codelineno-10-12></a><span class=w>    </span><span class=c1>// &#39;left_operand&#39; auto-generated (before) because it is a binary expression, and same type as parent</span>
<a id=__codelineno-10-13 name=__codelineno-10-13 href=#__codelineno-10-13></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>left_operand</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>Expression</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-14 name=__codelineno-10-14 href=#__codelineno-10-14></a><span class=w>    </span><span class=c1>// operator &#39;fields&#39; are flattened into the expression node here</span>
<a id=__codelineno-10-15 name=__codelineno-10-15 href=#__codelineno-10-15></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>operator</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-16 name=__codelineno-10-16 href=#__codelineno-10-16></a><span class=w>    </span><span class=c1>// &#39;right_operand&#39; auto-generated (after) because it is a binary expression, and same type as parent</span>
<a id=__codelineno-10-17 name=__codelineno-10-17 href=#__codelineno-10-17></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>right_operand</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>Expression</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-18 name=__codelineno-10-18 href=#__codelineno-10-18></a>
<a id=__codelineno-10-19 name=__codelineno-10-19 href=#__codelineno-10-19></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>cst</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>NonterminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-20 name=__codelineno-10-20 href=#__codelineno-10-20></a><span class=p>}</span>
<a id=__codelineno-10-21 name=__codelineno-10-21 href=#__codelineno-10-21></a>
<a id=__codelineno-10-22 name=__codelineno-10-22 href=#__codelineno-10-22></a><span class=k>pub</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=nc>FunctionCallExpression</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-23 name=__codelineno-10-23 href=#__codelineno-10-23></a><span class=w>    </span><span class=c1>// &#39;operand&#39; auto-generated (before) because it is a postfix expression, and same type as parent</span>
<a id=__codelineno-10-24 name=__codelineno-10-24 href=#__codelineno-10-24></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>operand</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>Expression</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-25 name=__codelineno-10-25 href=#__codelineno-10-25></a><span class=w>    </span><span class=c1>// operator &#39;fields&#39; are flattened into the expression node here</span>
<a id=__codelineno-10-26 name=__codelineno-10-26 href=#__codelineno-10-26></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>open_paren</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-27 name=__codelineno-10-27 href=#__codelineno-10-27></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>arguments</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>Arguments</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-28 name=__codelineno-10-28 href=#__codelineno-10-28></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>close_paren</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-29 name=__codelineno-10-29 href=#__codelineno-10-29></a>
<a id=__codelineno-10-30 name=__codelineno-10-30 href=#__codelineno-10-30></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>cst</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>NonterminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-31 name=__codelineno-10-31 href=#__codelineno-10-31></a><span class=p>}</span>
<a id=__codelineno-10-32 name=__codelineno-10-32 href=#__codelineno-10-32></a>
<a id=__codelineno-10-33 name=__codelineno-10-33 href=#__codelineno-10-33></a><span class=k>pub</span><span class=w> </span><span class=k>struct</span><span class=w> </span><span class=nc>NegationExpression</span><span class=w> </span><span class=p>{</span>
<a id=__codelineno-10-34 name=__codelineno-10-34 href=#__codelineno-10-34></a><span class=w>    </span><span class=c1>// operator &#39;fields&#39; are flattened into the expression node here</span>
<a id=__codelineno-10-35 name=__codelineno-10-35 href=#__codelineno-10-35></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>operator</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>TerminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-36 name=__codelineno-10-36 href=#__codelineno-10-36></a><span class=w>    </span><span class=c1>// &#39;operand&#39; auto-generated (after) because it is a prefix expression, and same type as parent</span>
<a id=__codelineno-10-37 name=__codelineno-10-37 href=#__codelineno-10-37></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>operand</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>Expression</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-38 name=__codelineno-10-38 href=#__codelineno-10-38></a>
<a id=__codelineno-10-39 name=__codelineno-10-39 href=#__codelineno-10-39></a><span class=w>    </span><span class=k>pub</span><span class=w> </span><span class=n>cst</span><span class=p>:</span><span class=w> </span><span class=nc>Rc</span><span class=o>&lt;</span><span class=n>NonterminalNode</span><span class=o>&gt;</span><span class=p>,</span>
<a id=__codelineno-10-40 name=__codelineno-10-40 href=#__codelineno-10-40></a><span class=p>}</span>
</code></pre></div><h2 id=error-recovery>Error Recovery<a class=headerlink href=#error-recovery title="Permanent link">#</a></h2><p>For the CST, I think the current algorithms work well, and we should be able to keep them. Unrecognized (skipped) input is grouped into one token, and we can just add it as-is to the <code>cst</code> node under its AST node.</p><p>During AST construction, we will simply check for <code>TerminalKind::UNRECOGNIZED</code> nodes, and skip construction if there are any.</p><h2 id=public-api-changes>Public API Changes<a class=headerlink href=#public-api-changes title="Permanent link">#</a></h2><p>Based on the above, I propose the following changes to the current public API:</p><ul><li>Rename <code>TokenKind</code> to <code>TerminalKind</code>, since it will also refer to trivia.</li><li>Rename <code>RuleKind</code> to <code>NonterminalKind</code>, since "rule" is ambiguous.</li><li>Rename <code>TerminalKind::SKIPPED</code>to <code>UNRECOGNIZED</code> for clarity.</li><li>Hide <code>LexicalContext</code> and <code>fn scan(TokenKind)</code> from the public API, as it is a short-term workaround, and will be replaced later when we have language embedding.</li><li>Remove <code>ProductionKind</code> completely, since it is no longer needed. We only need to expose <code>fn parse(NonterminalKind)</code>.</li><li>Since <code>EndOFFileTrivia</code> no longer exists, <code>ParseResult</code> should collect any remaining trivia at the end of the input, and include it in the <code>ParseResult</code> returned, for any kind of node, not just <code>SourceUnit</code>.</li></ul><h2 id=visitors-and-cursors>Visitors and Cursors<a class=headerlink href=#visitors-and-cursors title="Permanent link">#</a></h2><p>The current CST visitors/cursors should still work as-is, since the CST tree will be unchanged. However, the new AST types allow us in the future to produce typed visitors and traits with named functions for every node type, similar to a lot of other AST processing libraries. I want to at least produce an immutable <code>Visitor</code> and a mutable <code>Rewriter</code>.</p></article></div><script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button type=button class="md-top md-icon" data-md-component=top hidden><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top </button></main><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=Footer><a href=../ class="md-footer__link md-footer__link--prev" aria-label="Previous: Design Docs"><div class="md-footer__button md-icon"><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></div><div class=md-footer__title><span class=md-footer__direction> Previous </span><div class=md-ellipsis> Design Docs </div></div></a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright><div class=md-copyright__highlight> Copyright (c) 2022-2024 Nomic Foundation | <b><a target=_blank href=https://github.com/NomicFoundation/slang/blob/main/LICENSE>License</a></b> | <b><a target=_blank href=https://hardhat.org/privacy-policy.html>Privacy Policy</a></b> | <b><a href=#__consent>Cookie Settings</a></b></div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a></div><div class=md-social><a href=https://github.com/NomicFoundation/slang/ target=_blank rel=noopener title=github.com class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg></a><a href=https://twitter.com/nomicfoundation/ target=_blank rel=noopener title=twitter.com class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 512 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg></a><a href=https://nomic.foundation/ target=_blank rel=noopener title=nomic.foundation class=md-social__link><svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 640 512"><!-- Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M579.8 267.7c56.5-56.5 56.5-148 0-204.5-50-50-128.8-56.5-186.3-15.4l-1.6 1.1c-14.4 10.3-17.7 30.3-7.4 44.6s30.3 17.7 44.6 7.4l1.6-1.1c32.1-22.9 76-19.3 103.8 8.6 31.5 31.5 31.5 82.5 0 114L422.3 334.8c-31.5 31.5-82.5 31.5-114 0-27.9-27.9-31.5-71.8-8.6-103.8l1.1-1.6c10.3-14.4 6.9-34.4-7.4-44.6s-34.4-6.9-44.6 7.4l-1.1 1.6C206.5 251.2 213 330 263 380c56.5 56.5 148 56.5 204.5 0zM60.2 244.3c-56.5 56.5-56.5 148 0 204.5 50 50 128.8 56.5 186.3 15.4l1.6-1.1c14.4-10.3 17.7-30.3 7.4-44.6s-30.3-17.7-44.6-7.4l-1.6 1.1c-32.1 22.9-76 19.3-103.8-8.6C74 372 74 321 105.5 289.5l112.2-112.3c31.5-31.5 82.5-31.5 114 0 27.9 27.9 31.5 71.8 8.6 103.9l-1.1 1.6c-10.3 14.4-6.9 34.4 7.4 44.6s34.4 6.9 44.6-7.4l1.1-1.6C433.5 260.8 427 182 377 132c-56.5-56.5-148-56.5-204.5 0z"/></svg></a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><div class=md-consent data-md-component=consent id=__consent hidden><div class=md-consent__overlay></div><aside class=md-consent__inner><form class="md-consent__form md-grid md-typeset" name=consent><h4>Cookie Consent</h4><p>We use cookies to recognize your visits and preferences, as well as to measure the effectiveness of our documentation, and whether users find what they're searching for. With your consent, you're helping us to make our documentation better. </p><input class=md-toggle type=checkbox id=__settings checked><div class=md-consent__settings><ul class=task-list><li class=task-list-item><label class=task-list-control><input type=checkbox name=analytics checked><span class=task-list-indicator></span> Google Analytics </label></li><li class=task-list-item><label class=task-list-control><input type=checkbox name=github checked><span class=task-list-indicator></span> GitHub </label></li></ul></div><div class=md-consent__controls><button class="md-button md-button--primary">Accept</button><button type=reset class="md-button md-button--primary">Reject</button></div></form></aside></div><script>var consent=__md_get("__consent");if(consent)for(var input of document.forms.consent.elements)input.name&&(input.checked=consent[input.name]||!1);else"file:"!==location.protocol&&setTimeout((function(){document.querySelector("[data-md-component=consent]").hidden=!1}),250);var form=document.forms.consent;for(var action of["submit","reset"])form.addEventListener(action,(function(e){if(e.preventDefault(),"reset"===e.type)for(var n of document.forms.consent.elements)n.name&&(n.checked=!1);__md_set("__consent",Object.fromEntries(Array.from(new FormData(form).keys()).map((function(e){return[e,!0]})))),location.hash="",location.reload()}))</script><script id=__config type=application/json>{"base": "../../..", "features": ["content.action.edit", "content.action.view", "content.code.copy", "content.tabs.link", "navigation.expand", "navigation.footer", "navigation.indexes", "navigation.sections", "navigation.tabs", "navigation.top", "search.highlight", "search.suggest", "toc.follow"], "search": "../../../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"alias": true, "default": "latest", "provider": "mike"}}</script><script src=../../../assets/javascripts/bundle.5090c770.min.js></script><script src=../../../assets/javascripts/grammar-navigation.min.js></script></body></html>