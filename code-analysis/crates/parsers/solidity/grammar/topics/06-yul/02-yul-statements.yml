# yaml-language-server: $schema=../../../../../codegen/schema/topic.schema.json

- name: YulBlock
  delimitedBy:
    open: "{"
    zeroOrMore:
      reference: YulStatement
    close: "}"

- name: YulStatement
  choice:
    - reference: YulBlock
    - reference: YulVariableDeclaration
    - reference: YulFunctionDefinition
    - reference: YulAssignmentStatement
    - reference: YulFunctionCall
    - reference: YulIfStatement
    - reference: YulForStatement
    - reference: YulSwitchStatement
    - reference: YulLeaveStatement
    - reference: YulBreakStatement
    - reference: YulContinueStatement

- name: YulVariableDeclaration
  sequence:
    - terminal: let
    - separatedBy:
        reference: YulIdentifierPath
        separator: ","
    - optional:
        sequence:
          - terminal: ":="
          - reference: YulExpression

- name: YulFunctionDefinition
  sequence:
    - terminal: function
    - reference: YulIdentifier
    - delimitedBy:
        open: (
        optional:
          separatedBy:
            reference: YulIdentifier
            separator: ","
        close: )
    - optional:
        sequence:
          - terminal: "->"
          - separatedBy:
              reference: YulIdentifier
              separator: ","
    - reference: YulBlock

- name: YulAssignmentStatement
  sequence:
    - separatedBy:
        reference: YulIdentifierPath
        separator: ","
    - terminal: ":="
    - reference: YulExpression

- name: YulFunctionCall
  sequence:
    - reference: YulIdentifier
    - delimitedBy:
        open: (
        optional:
          separatedBy:
            reference: YulExpression
            separator: ","
        close: )

- name: YulIfStatement
  sequence:
    - terminal: if
    - reference: YulExpression
    - reference: YulBlock

- name: YulLeaveStatement
  terminal: leave

- name: YulBreakStatement
  terminal: break

- name: YulContinueStatement
  terminal: continue

- name: YulForStatement
  sequence:
    - terminal: for
    - reference: YulBlock
    - reference: YulExpression
    - reference: YulBlock
    - reference: YulBlock

- name: YulSwitchStatement
  sequence:
    - terminal: switch
    - reference: YulExpression
    - oneOrMore:
        sequence:
          - choice:
              - sequence:
                  - terminal: case
                  - reference: YulLiteral
              - terminal: default
          - reference: YulBlock
