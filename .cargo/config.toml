[profile.dev.build-override]
debug = true

[profile.release]
incremental = true
lto = true

[build]
# TODO: Replace with `[lints]` once we upgrade to Rust 1.74
# https://blog.rust-lang.org/2023/11/16/Rust-1.74.0.html#lint-configuration-through-cargo
rustflags = [
	# rustc additional warnings:
	"--warn",
	"unused_crate_dependencies",
	"--warn",
	"nonstandard_style",
	"--warn",
	"rust_2018_idioms",
	# clippy additional warnings:
	# Suspicious
	"-Wclippy::await_holding_lock",
	# Restriction
	"-Wclippy::dbg_macro",
	"-Wclippy::exit",
	"-Wclippy::float_cmp_const",
	"-Wclippy::lossy_float_literal",
	"-Wclippy::mem_forget",
	"-Wclippy::rc_mutex",
	"-Wclippy::rest_pat_in_fully_bound_structs",
	"-Wclippy::string_add",
	"-Wclippy::string_to_string",
	"-Wclippy::todo",
	"-Wclippy::verbose_file_reads",
	# Complexity
	"-Wclippy::char_lit_as_u8",
	"-Wclippy::checked_conversions",
	"-Wclippy::map_flatten",
	"-Wclippy::useless_transmute",
	# Style
	"-Wclippy::let_unit_value",
	"-Wclippy::missing_enforced_import_renames",
	"-Wclippy::needless_borrow",
	# Pedantic
	"-Wclippy::bool-to-int-with-if",
	"-Wclippy::cast_lossless",
	"-Wclippy::default_trait_access",
	"-Wclippy::doc_markdown",
	"-Wclippy::enum_glob_use",
	"-Wclippy::expl_impl_clone_on_copy",
	"-Wclippy::explicit_deref_methods",
	"-Wclippy::explicit_into_iter_loop",
	"-Wclippy::filter_map_next",
	"-Wclippy::flat_map_option",
	"-Wclippy::fn_params_excessive_bools",
	"-Wclippy::inefficient_to_string",
	"-Wclippy::invalid_upcast_comparisons",
	"-Wclippy::items_after_statements",
	"-Wclippy::large_digit_groups",
	"-Wclippy::large_stack_arrays",
	"-Wclippy::large_types_passed_by_value",
	"-Wclippy::linkedlist",
	"-Wclippy::macro_use_imports",
	"-Wclippy::manual_assert",
	"-Wclippy::manual_ok_or",
	"-Wclippy::map_unwrap_or",
	"-Wclippy::match_on_vec_items",
	"-Wclippy::match_wild_err_arm",
	"-Wclippy::mut_mut",
	"-Wclippy::needless_continue",
	"-Wclippy::needless_for_each",
	"-Wclippy::option_option",
	"-Wclippy::ptr_as_ptr",
	"-Wclippy::ref_option_ref",
	"-Wclippy::same_functions_in_if_condition",
	"-Wclippy::string_add_assign",
	"-Wclippy::uninlined_format_args",
	"-Wclippy::unnested_or_patterns",
	"-Wclippy::wildcard_imports",
	"-Wclippy::zero_sized_map_values",
	# Nursery
	"-Wclippy::debug_assert_with_mut_call",
	"-Wclippy::fallible_impl_from",
	"-Wclippy::mutex_integer",
	"-Wclippy::path_buf_push_overwrite",
	"-Wclippy::string_lit_as_bytes",
	"-Wclippy::trait_duplication_in_bounds",
]
