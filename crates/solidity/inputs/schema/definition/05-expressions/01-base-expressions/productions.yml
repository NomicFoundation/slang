# yaml-language-server: $schema=../../../../../../../codegen/schema/generated/productions.schema.json

- name: "Expression"
  kind: "PrecedenceParser"
  versioned:
    0.4.11:
      operators:
        - name: "AssignmentExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Equal"
            - reference: "BarEqual"
            - reference: "CaretEqual"
            - reference: "AmpersandEqual"
            - reference: "LessThanLessThanEqual"
            - reference: "GreaterThanGreaterThanEqual"
            - reference: "GreaterThanGreaterThanGreaterThanEqual"
            - reference: "PlusEqual"
            - reference: "MinusEqual"
            - reference: "AsteriskEqual"
            - reference: "SlashEqual"
            - reference: "PercentEqual"

        - name: "ConditionalExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "QuestionMark"
            - reference: "Expression"
            - reference: "Colon"
            - reference: "Expression"

        - name: "OrExpression"
          model: "BinaryLeftAssociative"
          reference: "BarBar"

        - name: "AndExpression"
          model: "BinaryLeftAssociative"
          reference: "AmpersandAmpersand"

        - name: "EqualityComparisonExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "EqualEqual"
            - reference: "BangEqual"

        - name: "OrderComparisonExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "LessThan"
            - reference: "GreaterThan"
            - reference: "LessThanEqual"
            - reference: "GreaterThanEqual"

        - name: "BitOrExpression"
          model: "BinaryLeftAssociative"
          reference: "Bar"

        - name: "BitXOrExpression"
          model: "BinaryLeftAssociative"
          reference: "Caret"

        - name: "BitAndExpression"
          model: "BinaryLeftAssociative"
          reference: "Ampersand"

        - name: "ShiftExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "LessThanLessThan"
            - reference: "GreaterThanGreaterThan"
            - reference: "GreaterThanGreaterThanGreaterThan"

        - name: "AddSubExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Plus"
            - reference: "Minus"

        - name: "MulDivModExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Asterisk"
            - reference: "Slash"
            - reference: "Percent"

        - name: "ExponentiationExpression"
          model: "BinaryLeftAssociative"
          reference: "AsteriskAsterisk"

        - name: "UnaryPostfixExpression"
          model: "UnaryPostfix"
          choice:
            - reference: "PlusPlus"
            - reference: "MinusMinus"

        - name: "UnaryPrefixExpression"
          model: "UnaryPrefix"
          choice:
            - reference: "PlusPlus"
            - reference: "MinusMinus"
            - reference: "Tilde"
            - reference: "Bang"
            - reference: "Minus"
            - reference: "Plus"

        - name: "FunctionCallExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "ArgumentList"

        - name: "MemberAccessExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "Period"
            - choice:
                - reference: "Identifier"
                - reference: "AddressKeyword"

        - name: "IndexAccessExpression"
          model: "UnaryPostfix"
          delimitedBy:
            open:
              reference: "OpenBracket"
            expression:
              choice:
                - sequence:
                    - reference: "Expression"
                    - optional:
                        sequence:
                          - reference: "Colon"
                          - optional:
                              reference: "Expression"
                - sequence:
                    - reference: "Colon"
                    - optional:
                        reference: "Expression"
            close:
              reference: "CloseBracket"

      primaryExpression:
        reference: "PrimaryExpression"

    0.5.0:
      # removed: "UnaryPrefixExpression -> Plus"
      operators:
        - name: "AssignmentExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Equal"
            - reference: "BarEqual"
            - reference: "CaretEqual"
            - reference: "AmpersandEqual"
            - reference: "LessThanLessThanEqual"
            - reference: "GreaterThanGreaterThanEqual"
            - reference: "GreaterThanGreaterThanGreaterThanEqual"
            - reference: "PlusEqual"
            - reference: "MinusEqual"
            - reference: "AsteriskEqual"
            - reference: "SlashEqual"
            - reference: "PercentEqual"

        - name: "ConditionalExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "QuestionMark"
            - reference: "Expression"
            - reference: "Colon"
            - reference: "Expression"

        - name: "OrExpression"
          model: "BinaryLeftAssociative"
          reference: "BarBar"

        - name: "AndExpression"
          model: "BinaryLeftAssociative"
          reference: "AmpersandAmpersand"

        - name: "EqualityComparisonExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "EqualEqual"
            - reference: "BangEqual"

        - name: "OrderComparisonExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "LessThan"
            - reference: "GreaterThan"
            - reference: "LessThanEqual"
            - reference: "GreaterThanEqual"

        - name: "BitOrExpression"
          model: "BinaryLeftAssociative"
          reference: "Bar"

        - name: "BitXOrExpression"
          model: "BinaryLeftAssociative"
          reference: "Caret"

        - name: "BitAndExpression"
          model: "BinaryLeftAssociative"
          reference: "Ampersand"

        - name: "ShiftExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "LessThanLessThan"
            - reference: "GreaterThanGreaterThan"
            - reference: "GreaterThanGreaterThanGreaterThan"

        - name: "AddSubExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Plus"
            - reference: "Minus"

        - name: "MulDivModExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Asterisk"
            - reference: "Slash"
            - reference: "Percent"

        - name: "ExponentiationExpression"
          model: "BinaryLeftAssociative"
          reference: "AsteriskAsterisk"

        - name: "UnaryPostfixExpression"
          model: "UnaryPostfix"
          choice:
            - reference: "PlusPlus"
            - reference: "MinusMinus"

        - name: "UnaryPrefixExpression"
          model: "UnaryPrefix"
          choice:
            - reference: "PlusPlus"
            - reference: "MinusMinus"
            - reference: "Tilde"
            - reference: "Bang"
            - reference: "Minus"

        - name: "FunctionCallExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "ArgumentList"

        - name: "MemberAccessExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "Period"
            - choice:
                - reference: "Identifier"
                - reference: "AddressKeyword"

        - name: "IndexAccessExpression"
          model: "UnaryPostfix"
          delimitedBy:
            open:
              reference: "OpenBracket"
            expression:
              choice:
                - sequence:
                    - reference: "Expression"
                    - optional:
                        sequence:
                          - reference: "Colon"
                          - optional:
                              reference: "Expression"
                - sequence:
                    - reference: "Colon"
                    - optional:
                        reference: "Expression"
            close:
              reference: "CloseBracket"

      primaryExpression:
        reference: "PrimaryExpression"

    0.6.0:
      # changed: Exponentiation now right associative
      operators:
        - name: "AssignmentExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Equal"
            - reference: "BarEqual"
            - reference: "CaretEqual"
            - reference: "AmpersandEqual"
            - reference: "LessThanLessThanEqual"
            - reference: "GreaterThanGreaterThanEqual"
            - reference: "GreaterThanGreaterThanGreaterThanEqual"
            - reference: "PlusEqual"
            - reference: "MinusEqual"
            - reference: "AsteriskEqual"
            - reference: "SlashEqual"
            - reference: "PercentEqual"

        - name: "ConditionalExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "QuestionMark"
            - reference: "Expression"
            - reference: "Colon"
            - reference: "Expression"

        - name: "OrExpression"
          model: "BinaryLeftAssociative"
          reference: "BarBar"

        - name: "AndExpression"
          model: "BinaryLeftAssociative"
          reference: "AmpersandAmpersand"

        - name: "EqualityComparisonExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "EqualEqual"
            - reference: "BangEqual"

        - name: "OrderComparisonExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "LessThan"
            - reference: "GreaterThan"
            - reference: "LessThanEqual"
            - reference: "GreaterThanEqual"

        - name: "BitOrExpression"
          model: "BinaryLeftAssociative"
          reference: "Bar"

        - name: "BitXOrExpression"
          model: "BinaryLeftAssociative"
          reference: "Caret"

        - name: "BitAndExpression"
          model: "BinaryLeftAssociative"
          reference: "Ampersand"

        - name: "ShiftExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "LessThanLessThan"
            - reference: "GreaterThanGreaterThan"
            - reference: "GreaterThanGreaterThanGreaterThan"

        - name: "AddSubExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Plus"
            - reference: "Minus"

        - name: "MulDivModExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Asterisk"
            - reference: "Slash"
            - reference: "Percent"

        - name: "ExponentiationExpression"
          model: "BinaryRightAssociative"
          reference: "AsteriskAsterisk"

        - name: "UnaryPostfixExpression"
          model: "UnaryPostfix"
          choice:
            - reference: "PlusPlus"
            - reference: "MinusMinus"

        - name: "UnaryPrefixExpression"
          model: "UnaryPrefix"
          choice:
            - reference: "PlusPlus"
            - reference: "MinusMinus"
            - reference: "Tilde"
            - reference: "Bang"
            - reference: "Minus"

        - name: "FunctionCallExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "ArgumentList"

        - name: "MemberAccessExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "Period"
            - choice:
                - reference: "Identifier"
                - reference: "AddressKeyword"

        - name: "IndexAccessExpression"
          model: "UnaryPostfix"
          delimitedBy:
            open:
              reference: "OpenBracket"
            expression:
              choice:
                - sequence:
                    - reference: "Expression"
                    - optional:
                        sequence:
                          - reference: "Colon"
                          - optional:
                              reference: "Expression"
                - sequence:
                    - reference: "Colon"
                    - optional:
                        reference: "Expression"
            close:
              reference: "CloseBracket"

      primaryExpression:
        reference: "PrimaryExpression"

    0.6.2:
      # Added zeroOrMore "FunctionCallOptions"
      operators:
        - name: "AssignmentExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Equal"
            - reference: "BarEqual"
            - reference: "CaretEqual"
            - reference: "AmpersandEqual"
            - reference: "LessThanLessThanEqual"
            - reference: "GreaterThanGreaterThanEqual"
            - reference: "GreaterThanGreaterThanGreaterThanEqual"
            - reference: "PlusEqual"
            - reference: "MinusEqual"
            - reference: "AsteriskEqual"
            - reference: "SlashEqual"
            - reference: "PercentEqual"

        - name: "ConditionalExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "QuestionMark"
            - reference: "Expression"
            - reference: "Colon"
            - reference: "Expression"

        - name: "OrExpression"
          model: "BinaryLeftAssociative"
          reference: "BarBar"

        - name: "AndExpression"
          model: "BinaryLeftAssociative"
          reference: "AmpersandAmpersand"

        - name: "EqualityComparisonExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "EqualEqual"
            - reference: "BangEqual"

        - name: "OrderComparisonExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "LessThan"
            - reference: "GreaterThan"
            - reference: "LessThanEqual"
            - reference: "GreaterThanEqual"

        - name: "BitOrExpression"
          model: "BinaryLeftAssociative"
          reference: "Bar"

        - name: "BitXOrExpression"
          model: "BinaryLeftAssociative"
          reference: "Caret"

        - name: "BitAndExpression"
          model: "BinaryLeftAssociative"
          reference: "Ampersand"

        - name: "ShiftExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "LessThanLessThan"
            - reference: "GreaterThanGreaterThan"
            - reference: "GreaterThanGreaterThanGreaterThan"

        - name: "AddSubExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Plus"
            - reference: "Minus"

        - name: "MulDivModExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Asterisk"
            - reference: "Slash"
            - reference: "Percent"

        - name: "ExponentiationExpression"
          model: "BinaryRightAssociative"
          reference: "AsteriskAsterisk"

        - name: "UnaryPostfixExpression"
          model: "UnaryPostfix"
          choice:
            - reference: "PlusPlus"
            - reference: "MinusMinus"

        - name: "UnaryPrefixExpression"
          model: "UnaryPrefix"
          choice:
            - reference: "PlusPlus"
            - reference: "MinusMinus"
            - reference: "Tilde"
            - reference: "Bang"
            - reference: "Minus"

        - name: "FunctionCallExpression"
          model: "UnaryPostfix"
          sequence:
            - zeroOrMore:
                reference: "FunctionCallOptions"
            - reference: "ArgumentList"

        - name: "MemberAccessExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "Period"
            - choice:
                - reference: "Identifier"
                - reference: "AddressKeyword"

        - name: "IndexAccessExpression"
          model: "UnaryPostfix"
          delimitedBy:
            open:
              reference: "OpenBracket"
            expression:
              choice:
                - sequence:
                    - reference: "Expression"
                    - optional:
                        sequence:
                          - reference: "Colon"
                          - optional:
                              reference: "Expression"
                - sequence:
                    - reference: "Colon"
                    - optional:
                        reference: "Expression"
            close:
              reference: "CloseBracket"

      primaryExpression:
        reference: "PrimaryExpression"

    0.8.0:
      # "FunctionCallOptions" is now optional
      operators:
        - name: "AssignmentExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Equal"
            - reference: "BarEqual"
            - reference: "CaretEqual"
            - reference: "AmpersandEqual"
            - reference: "LessThanLessThanEqual"
            - reference: "GreaterThanGreaterThanEqual"
            - reference: "GreaterThanGreaterThanGreaterThanEqual"
            - reference: "PlusEqual"
            - reference: "MinusEqual"
            - reference: "AsteriskEqual"
            - reference: "SlashEqual"
            - reference: "PercentEqual"

        - name: "ConditionalExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "QuestionMark"
            - reference: "Expression"
            - reference: "Colon"
            - reference: "Expression"

        - name: "OrExpression"
          model: "BinaryLeftAssociative"
          reference: "BarBar"

        - name: "AndExpression"
          model: "BinaryLeftAssociative"
          reference: "AmpersandAmpersand"

        - name: "EqualityComparisonExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "EqualEqual"
            - reference: "BangEqual"

        - name: "OrderComparisonExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "LessThan"
            - reference: "GreaterThan"
            - reference: "LessThanEqual"
            - reference: "GreaterThanEqual"

        - name: "BitOrExpression"
          model: "BinaryLeftAssociative"
          reference: "Bar"

        - name: "BitXOrExpression"
          model: "BinaryLeftAssociative"
          reference: "Caret"

        - name: "BitAndExpression"
          model: "BinaryLeftAssociative"
          reference: "Ampersand"

        - name: "ShiftExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "LessThanLessThan"
            - reference: "GreaterThanGreaterThan"
            - reference: "GreaterThanGreaterThanGreaterThan"

        - name: "AddSubExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Plus"
            - reference: "Minus"

        - name: "MulDivModExpression"
          model: "BinaryLeftAssociative"
          choice:
            - reference: "Asterisk"
            - reference: "Slash"
            - reference: "Percent"

        - name: "ExponentiationExpression"
          model: "BinaryRightAssociative"
          reference: "AsteriskAsterisk"

        - name: "UnaryPostfixExpression"
          model: "UnaryPostfix"
          choice:
            - reference: "PlusPlus"
            - reference: "MinusMinus"

        - name: "UnaryPrefixExpression"
          model: "UnaryPrefix"
          choice:
            - reference: "PlusPlus"
            - reference: "MinusMinus"
            - reference: "Tilde"
            - reference: "Bang"
            - reference: "Minus"

        - name: "FunctionCallExpression"
          model: "UnaryPostfix"
          sequence:
            - optional:
                reference: "FunctionCallOptions"
            - reference: "ArgumentList"

        - name: "MemberAccessExpression"
          model: "UnaryPostfix"
          sequence:
            - reference: "Period"
            - choice:
                - reference: "Identifier"
                - reference: "AddressKeyword"

        - name: "IndexAccessExpression"
          model: "UnaryPostfix"
          delimitedBy:
            open:
              reference: "OpenBracket"
            expression:
              choice:
                - sequence:
                    - reference: "Expression"
                    - optional:
                        sequence:
                          - reference: "Colon"
                          - optional:
                              reference: "Expression"
                - sequence:
                    - reference: "Colon"
                    - optional:
                        reference: "Expression"
            close:
              reference: "CloseBracket"

      primaryExpression:
        reference: "PrimaryExpression"
