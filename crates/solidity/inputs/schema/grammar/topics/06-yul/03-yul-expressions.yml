# yaml-language-server: $schema=../../../../../../codegen/schema/generated/topic.schema.json

- name: "YulExpression"
  kind: "Rule"
  unversioned:
    choice:
      - reference: "YulFunctionCall"
      - reference: "YulLiteral"

- name: "YulFunctionCall"
  kind: "Rule"
  unversioned:
    sequence:
      - reference: "YulIdentifierPath"
      # TODO: temporary hack until precedence is implemented properly here.
      # `YulIdentifierPath` should be promoted to a `YulExpression` choice, and the `optional` removed from here.
      - optional:
          delimitedBy:
            open: "("
            expression:
              optional:
                separatedBy:
                  separator: ","
                  expression:
                    reference: "YulExpression"
            close: ")"

- name: "YulIdentifierPath"
  kind: "Rule"
  unversioned:
    separatedBy:
      separator: "."
      expression:
        reference: "YulIdentifier"

- name: "YulIdentifier"
  kind: "Token"
  unversioned:
    difference:
      minuend:
        reference: "RawIdentifier"
      subtrahend:
        reference: "YulKeyword"

- name: "YulKeyword"
  kind: "Token"
  unversioned:
    choice:
      - reference: "BooleanLiteral"
      - terminal: "break"
      - terminal: "case"
      - terminal: "continue"
      - terminal: "default"
      - terminal: "for"
      - terminal: "function"
      - terminal: "hex"
      - terminal: "if"
      - terminal: "leave"
      - terminal: "let"
      - terminal: "switch"

- name: "YulLiteral"
  kind: "Rule"
  unversioned:
    choice:
      - reference: "BooleanLiteral"
      - reference: "YulHexLiteral"
      - reference: "YulDecimalLiteral"
      - reference: "HexStringLiteral"
      - reference: "AsciiStringLiteral"

- name: "YulHexLiteral"
  kind: "Token"
  unversioned:
    sequence:
      - terminal: "0x"
      - oneOrMore:
          reference: "HexCharacter"

- name: "YulDecimalLiteral"
  kind: "Token"
  unversioned:
    choice:
      - terminal: "0"
      - sequence:
          - range:
              from: "1"
              to: "9"
          - zeroOrMore:
              range:
                from: "0"
                to: "9"
