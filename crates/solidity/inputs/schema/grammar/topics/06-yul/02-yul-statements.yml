# yaml-language-server: $schema=../../../../../../codegen/schema/generated/topic.schema.json

- name: "YulBlock"
  kind: "Rule"
  unversioned:
    delimitedBy:
      open: "{"
      expression:
        zeroOrMore:
          reference: "YulStatement"
      close: "}"

- name: "YulStatement"
  kind: "Rule"
  unversioned:
    choice:
      - reference: "YulBlock"
      - reference: "YulVariableDeclaration"
      - reference: "YulFunctionDefinition"
      - reference: "YulAssignmentStatement"
      - reference: "YulFunctionCall"
      - reference: "YulIfStatement"
      - reference: "YulForStatement"
      - reference: "YulSwitchStatement"
      - reference: "YulLeaveStatement"
      - reference: "YulBreakStatement"
      - reference: "YulContinueStatement"

- name: "YulVariableDeclaration"
  kind: "Rule"
  unversioned:
    sequence:
      - terminal: "let"
      - separatedBy:
          separator: ","
          expression:
            reference: "YulIdentifierPath"
      - optional:
          sequence:
            - terminal: ":="
            - reference: "YulExpression"

- name: "YulFunctionDefinition"
  kind: "Rule"
  unversioned:
    sequence:
      - terminal: "function"
      - reference: "YulIdentifier"
      - delimitedBy:
          open: "("
          expression:
            optional:
              name: "Arguments"
              separatedBy:
                separator: ","
                expression:
                  reference: "YulIdentifier"
          close: ")"
      - optional:
          sequence:
            - terminal: "->"
            - name: "Results"
              separatedBy:
                separator: ","
                expression:
                  reference: "YulIdentifier"
      - reference: "YulBlock"

- name: "YulAssignmentStatement"
  kind: "Rule"
  unversioned:
    sequence:
      - separatedBy:
          separator: ","
          expression:
            reference: "YulIdentifierPath"
      - terminal: ":="
      - reference: "YulExpression"

- name: "YulFunctionCall"
  kind: "Rule"
  unversioned:
    sequence:
      - reference: "YulIdentifier"
      - delimitedBy:
          open: "("
          expression:
            optional:
              separatedBy:
                separator: ","
                expression:
                  reference: "YulExpression"
          close: ")"

- name: "YulIfStatement"
  kind: "Rule"
  unversioned:
    sequence:
      - terminal: "if"
      - reference: "YulExpression"
      - reference: "YulBlock"

- name: "YulLeaveStatement"
  kind: "Rule"
  unversioned:
    terminal: "leave"

- name: "YulBreakStatement"
  kind: "Rule"
  unversioned:
    terminal: "break"

- name: "YulContinueStatement"
  kind: "Rule"
  unversioned:
    terminal: "continue"

- name: "YulForStatement"
  kind: "Rule"
  unversioned:
    sequence:
      - terminal: "for"
      - reference: "YulBlock"
      - reference: "YulExpression"
      - reference: "YulBlock"
      - reference: "YulBlock"

- name: "YulSwitchStatement"
  kind: "Rule"
  unversioned:
    sequence:
      - terminal: "switch"
      - reference: "YulExpression"
      - oneOrMore:
          sequence:
            - choice:
                - sequence:
                    - terminal: "case"
                    - reference: "YulLiteral"
                - terminal: "default"
            - reference: "YulBlock"
