# yaml-language-server: $schema=../../../../../syntax-schema/syntax/schema/topic.schema.json

- name: SourceUnit
  sequence:
    - reference: LeadingTrivia
    - zeroOrMore:
        choice:
          - reference: Directive
          - reference: Definition
    - reference: EndOfFileTrivia
    - end: ~

- name: Directive
  choice:
    - reference: PragmaDirective
    - reference: ImportDirective
    - reference: UsingDirective

- name: Definition
  choice:
    - reference: ContractDefinition
    - reference: InterfaceDefinition
    - reference: LibraryDefinition
    - reference: FunctionDefinition
    - reference: ConstantDefinition
    - reference: StructDefinition
    - reference: EnumDefinition
    - reference: UserDefinedValueTypeDefinition
    - reference: ErrorDefinition

- name: ImportDirective
  sequence:
    - terminal: import
    - choice:
        - reference: SimpleImportDirective
        - reference: StarImportDirective
        - reference: SelectingImportDirective
    - terminal: ;

- name: SimpleImportDirective
  sequence:
    - reference: ImportPath
    - zeroOrMore:
        sequence:
          - terminal: as
          - reference: Identifier

- name: StarImportDirective
  sequence:
    - terminal: "*"
    - terminal: as
    - reference: Identifier
    - terminal: from
    - reference: ImportPath

- name: SelectingImportDirective
  sequence:
    - delimitedBy:
        open: { terminal: "{" }
        oneOrMore:
          reference: SelectedImport
          separator:
            terminal: ","
        close: { terminal: "}" }
    - terminal: from
    - reference: ImportPath

- name: SelectedImport
  sequence:
    - reference: Identifier
    - optional:
        sequence:
          - terminal: as
          - reference: Identifier

- name: ImportPath
  reference: AsciiStringLiteral

- name: UsingDirective
  sequence:
    - terminal: using
    - choice:
        - reference: IdentifierPath
        - delimitedBy:
            open: { terminal: "{" }
            oneOrMore:
              reference: IdentifierPath
              separator:
                terminal: ","
            close: { terminal: "}" }
    - terminal: for
    - choice:
        - terminal: "*"
        - reference: TypeName
    - optional:
        terminal: global
    - terminal: ;
